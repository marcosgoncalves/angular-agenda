<link rel="stylesheet" href="../assets/css/contato-styles.css" />
<link rel="stylesheet" href="../assets/css/grid-table-styles.css" />
<link rel="stylesheet" href="../assets/css/grid-pager-styles.css" />
<link rel="stylesheet" href="../assets/css/contato-search-form-styles.css" />
<link rel="stylesheet" href="../assets/css/contato-grid-styles.css" />

<style>
</style>

<div class="container-fluid">

	<h3>contatos</h3>

	<div ng-show="!vm.editing">

		<fieldset class="search-fieldset">

			<legend>Filtros</legend>

			<div class="grid-table">
				<div class="grid-row">
					<div class="grid-wrapper search-id-search-nome">
						<form class="grid-form" ng-submit="vm.goSearch()">
							<div class="grid-column search-id">
								<label for="searchId">Id</label>
								<input type="text" class="form-control form-control-sm" id="searchId" ng-model="vm.filters.id">
								<input type="submit" style="visibility: hidden; position: absolute;">
							</div>
						</form>
						<form class="grid-form" ng-submit="vm.goSearch()">
							<div class="grid-column search-nome">
								<label for="searchNome">Nome</label>
								<input type="text" class="form-control form-control-sm" id="searchNome" ng-model="vm.filters.nome">
								<input type="submit" style="visibility: hidden; position: absolute;">
							</div>
						</form>
					</div>
					<div class="grid-wrapper search-telefone-search-endereco">
						<form class="grid-form" ng-submit="vm.goSearch()">
							<div class="grid-column search-telefone">
								<label for="searchTelefone">Telefone</label>
								<input type="text" class="form-control form-control-sm" id="searchTelefone"
								    ng-model="vm.filters.telefone">
								<input type="submit" style="visibility: hidden; position: absolute;">
							</div>
						</form>
						<form class="grid-form" ng-submit="vm.goSearch()">
							<div class="grid-column search-endereco">
								<label for="searchEndereco">Endereço</label>
								<input type="text" class="form-control form-control-sm" id="searchEndereco"
								    ng-model="vm.filters.endereco_limpo">
								<input type="submit" style="visibility: hidden; position: absolute;">
							</div>
						</form>
					</div>
				</div>
			</div>
		</fieldset>

		<!-- ****************************************** -->

		<button type="button" ng-click="vm.novo();" class="btn btn-sm btn-success" data-toggle="tooltip"
		    title="Incluir">
			<span class="glyphicon glyphicon-plus"></span>
		</button>
		<button type="button" ng-click="vm.goSearch();" class="btn btn-sm btn-primary"
		    data-toggle="tooltip" title="Atualizar">
			<span class="glyphicon glyphicon-refresh"></span>
		</button>
		<grid-pager></grid-pager>

		<div class="grid-table grid-zebra grid-border">
			<div class="grid-row grid-header">
				<div class="grid-wrapper resto-endereco">
					<div class="grid-wrapper id-nome-telefone">
						<div class="grid-wrapper id-nome">
							<div class="grid-column id sortable" data-sort-column="id">
								<span>Id</span>
							</div>
							<div class="grid-column nome sortable" data-sort-column="nome">
								<span>Nome</span>
							</div>
						</div>
						<div class="grid-column telefone sortable" data-sort-column="telefone">
							<span>Telefone</span>
						</div>
					</div>
					<div class="grid-wrapper endereco">
						<div class="grid-column endereco">
							<span>Endereço</span>
						</div>
					</div>
				</div>
				<div class="grid-column buttons">
					<button class="btn btn-sm">
						<span class="glyphicon glyphicon-plus"></span>
					</button>
					<button class="btn btn-sm">
						<span class="glyphicon glyphicon-plus"></span>
					</button>
				</div>
			</div>

			<div class="grid-row" ng-repeat="contato in vm.contatoList">
				<div class="grid-wrapper resto-endereco">
					<div class="grid-wrapper id-nome-telefone">
						<div class="grid-wrapper id-nome">
							<div class="grid-column id">
								<label class="grid-label id sortable" data-sort-column="id">
									<span>Id</span>
								</label>
								<div>{{contato.id ? contato.id : '*'}}</div>
							</div>
							<div class="grid-column nome">
								<label class="grid-label nome sortable" data-sort-column="nome">
									<span>Nome</span>
								</label>
								<div>{{contato.nome}}</div>
							</div>
						</div>
						<div class="grid-column telefone">
							<label class="grid-label telefone sortable" data-sort-column="telefone">
								<span>Telefone</span>
							</label>
							<div>{{contato.telefone}}</div>
						</div>
					</div>
					<div class="grid-wrapper endereco">
						<div class="grid-column endereco">
							<label class="grid-label endereco">Endereço</label>
							<div>
								{{contato.endereco.tipoLogradouro === 'Outro' ? '' : contato.endereco.tipoLogradouro}}
								{{!contato.endereco.logradouro ? '' : contato.endereco.logradouro}}
								{{!contato.endereco.numero ? '' : ', ' + contato.endereco.numero}} {{!contato.endereco.complemento
								? '' : ' - ' + contato.endereco.complemento}} {{!contato.endereco.bairro
								? '' : ' - ' + contato.endereco.bairro}} {{!contato.endereco.cidade
								? '' : ' - ' + contato.endereco.cidade}} {{!contato.endereco.estado
								? '' : ' - ' + contato.endereco.estado}} {{!contato.endereco.cep ? ''
								: ' - CEP: ' + contato.endereco.cep}}
							</div>
						</div>
					</div>
				</div>
				<div class="grid-column buttons">
					<button type="button" ng-click="vm.edit(contato, $index);" class="btn btn-sm btn-primary"
					    data-toggle="tooltip" title="Editar">
						<span class="glyphicon glyphicon-pencil"></span>
					</button>
					<button type="button" ng-click="vm.remove(contato, $index);" class="btn btn-sm btn-danger"
					    data-toggle="tooltip" title="Excluir">
						<span class="glyphicon glyphicon-remove"></span>
					</button>
				</div>
			</div>
		</div>

		<grid-pager pager-position="bottom"></grid-pager>

	</div>
	<br>

	<div class="container" ng-show="vm.editing">

		<form name="vm.frmContato" class="form" ng-disabled="{{true}}" ng-model="vm.editing">

			<div id="frmTitle" class="form-row">
				<h5>{{ !vm.editing ? '' : vm.editing.idx
					< 0 ? 'Novo' : 'Editar' }} Contato</h5>
			</div>
			<div class="form-row">
				<div class="form-group form-group-sm col-md-1">
					<label>Id</label>
					<input name="id" ng-model="vm.editing.id" disabled type="text" class="form-control form-control-sm">
				</div>
				<div class="form-group form-group-sm col-md-9">
					<label>Nome</label>
					<input name="nome" ng-model="vm.editing.nome" required type="text" class="form-control form-control-sm">
				</div>
				<div class="form-group form-group-sm col-md-2">
					<label>Telefone</label>
					<input name="telefone" ng-model="vm.editing.telefone" required type="text" class="form-control form-control-sm">
				</div>
			</div>
			<div class="form-row">
				<h5>Endereço</h5>
			</div>
			<div class="form-row">

				<div class="form-group form-group-sm col-md-3">
					<label>Tipo Logradouro</label>
					<select name="tipoLogradouro" ng-model="vm.editing.endereco.tipoLogradouro"
					    required class="form-control form-control-sm">
						<option>Rua</option>
						<option>Avenida</option>
						<option>Alameda</option>
						<option>Travessa</option>
						<option>Outro</option>
					</select>
				</div>
				<div class="form-group form-group-sm col-md-9">
					<label>Logradouro</label>
					<input name="logradouro" ng-model="vm.editing.endereco.logradouro" required
					    type="text" class="form-control form-control-sm">
				</div>
			</div>
			<div class="form-row">
				<div class="form-group form-group-sm col-md-2">
					<label>Número</label>
					<input name="numero" ng-model="vm.editing.endereco.numero" required type="text"
					    class="form-control form-control-sm">
				</div>
				<div class="form-group form-group-sm col-md-5">
					<label>Complemento</label>
					<input name="complemento" ng-model="vm.editing.endereco.complemento" type="text"
					    class="form-control form-control-sm">
				</div>
				<div class="form-group form-group-sm col-md-5">
					<label>Bairro</label>
					<input name="bairro" ng-model="vm.editing.endereco.bairro" required type="text"
					    class="form-control form-control-sm">
				</div>
			</div>
			<div class="form-row">
				<div class="form-group form-group-sm col-md-6">
					<label>Cidade</label>
					<input name="cidade" ng-model="vm.editing.endereco.cidade" required type="text"
					    class="form-control form-control-sm">
				</div>
				<div class="form-group form-group-sm col-md-4">
					<label>Estado</label>
					<select name="estado" ng-model="vm.editing.endereco.estado" required class="form-control form-control-sm">
						<option ng-repeat="estado in vm.estadoList" value="{{estado.Sigla}}">{{estado.Nome}}</option>
					</select>
				</div>
				<div class="form-group form-group-sm col-md-2">
					<label>CEP</label>
					<input name="cep" ng-model="vm.editing.endereco.cep" required type="text" class="form-control form-control-sm">
				</div>
			</div>
			<div class="text-right">
				<button id="btnSalvar" ng-click="vm.save();" ng-disabled="!vm.editing" type="button"
				    class="btn btn-primary">salvar</button>
				<button ng-click="vm.cancel();" ng-disabled="!vm.editing" type="button" class="btn btn-danger">cancelar</button>
			</div>
		</form>
	</div>
</div>
<br>